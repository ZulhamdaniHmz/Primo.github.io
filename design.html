<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Design Page</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <div class="logo">PRIMOCUSTOMS.BN</div>
    <nav>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="shop.html">Shop</a></li>
        <li><a href="design.html">Custom Design</a></li>
        <li><a href="#">Contact</a></li>
      </ul>
    </nav>
  </header>
    <h1>Design Your Custom T-Shirt</h1>

   <div class="designer">
    <!-- T-shirt Preview with Real Image -->
    <div class="tshirt-preview" id="tshirtPreview">
      <img id="tshirtImage" src="gildan white.png" class="tshirt-image" alt="T-shirt" />
      <img id="uploadedImage" class="uploaded-image" />
    </div>

    <!-- Controls -->
    <div class="controls">
      <!-- T-shirt Color Picker -->
      <div>
        <label for="color">T-Shirt Color:</label>
        <select id="color" onchange="changeColor()">
          <option value="white">White</option>
          <option value="black">Black</option>
        </select>
      </div>

      <!-- Image Upload -->
      <div>
        <label for="imageUpload">Upload Your Design:</label>
        <input type="file" id="imageUpload" accept="image/*" onchange="previewImage(event)" />
      </div>

      <button onclick="resetDesign()">Reset</button>

      <button onclick="saveDesign()">Download Design</button>

      <!-- Back Button -->
      <button onclick="history.back()">‚Üê Back to Home</button>
    </div>
  </div>

  <footer class="footer">
  <div class="footer-container">
    
    <!-- Business Info -->
    <div class="footer-section">
      <h3>PrimoCustoms.BN</h3>
      <p>
        üìç Unit 12, Kg Kiulap, Bandar Seri Begawan, Brunei<br>
        üìû +673 123 4567<br>
        ‚úâÔ∏è support@primocustoms.bn
      </p>
    </div>

    <!-- Quick Links -->
    <div class="footer-section">
      <h4>Quick Links</h4>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="shop.html">Shop</a></li>
        <li><a href="design.html">Custom Design</a></li>
        <li><a href="#">Contact</a></li>
      </ul>
    </div>

    <!-- Social Media -->
    <div class="footer-section">
      <h4>Follow Us</h4>
      <div class="social-icons">
        <a href="https://www.instagram.com/" target="_blank">
          <img src="icons/instagram.png" alt="Instagram">
        </a>
        <a href="https://www.tiktok.com/" target="_blank">
          <img src="icons/tiktok.png" alt="TikTok">
        </a>
        <a href="https://www.facebook.com/" target="_blank">
          <img src="icons/facebook.png" alt="Facebook">
        </a>
      </div>
    </div>
  </div>

  <!-- Bottom Bar -->
  <div class="footer-bottom">
    <p>&copy; 2025 PrimoCustoms.BN | All Rights Reserved</p>
  </div>
</footer>

  <script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>


  <script>

  function resetDesign() {
    const uploadedImage = document.getElementById('uploadedImage');
    uploadedImage.src = '';
    uploadedImage.style.display = 'none';
    document.getElementById('color').value = 'white';
    changeColor();
   }
     
    function changeColor() {
      const color = document.getElementById('color').value;
      const tshirtImage = document.getElementById('tshirtImage');
      tshirtImage.src = `gildan ${color}.png`;
    }

    function previewImage(event) {
      const uploadedImage = document.getElementById('uploadedImage');
      uploadedImage.src = URL.createObjectURL(event.target.files[0]);
      uploadedImage.style.display = 'block';
      uploadedImage.style.width = '150px';
      uploadedImage.style.height = 'auto';
    }

    // Make uploaded image draggable and resizable
        interact('#uploadedImage')
    .draggable({
        modifiers: [
        interact.modifiers.restrictRect({
            restriction: 'parent', // Keep it inside the parent (.tshirt-preview)
            endOnly: true
        })
        ],
        inertia: true,
        onmove: dragMoveListener
    })
    .resizable({
        edges: { left: true, right: true, bottom: true, top: true },
        preserveAspectRatio: true,
        modifiers: [
        interact.modifiers.restrictSize({
            min: { width: 50, height: 50 },
            max: { width: 300, height: 300 }
        })
        ],
        inertia: true
    })
    .on('resizemove', function (event) {
        const target = event.target;
        let { width, height } = event.rect;

        target.style.width = `${width}px`;
        target.style.height = `${height}px`;

        let x = (parseFloat(target.dataset.x) || 0) + event.deltaRect.left;
        let y = (parseFloat(target.dataset.y) || 0) + event.deltaRect.top;

        target.style.transform = `translate(${x}px, ${y}px)`;
        target.dataset.x = x;
        target.dataset.y = y;
    });

    function dragMoveListener(event) {
      const target = event.target;

      let x = (parseFloat(target.dataset.x) || 0) + event.dx;
      let y = (parseFloat(target.dataset.y) || 0) + event.dy;

      target.style.transform = `translate(${x}px, ${y}px)`;
      target.dataset.x = x.toString();
      target.dataset.y = y.toString();
    }

      // Save the Design as PNG
    function saveDesign() {
      const tshirtPreview = document.getElementById('tshirtPreview');

      html2canvas(tshirtPreview, { backgroundColor: null }).then(canvas => {
        const link = document.createElement('a');
        link.download = 'custom-tshirt.png'; // File name
        link.href = canvas.toDataURL('image/png');
        link.click();
      });
    }

    // Required for older browsers
    window.dragMoveListener = dragMoveListener;
  </script>
</body>
</html>